================================================================================
AIO GENERATOR - COMPLETE PROJECT FILES
================================================================================
by AWC Technology LLC

Instructions:
1. Create a new folder called "aio-generator"
2. Create each file below at the specified path
3. Run: npm install
4. Run: npm run dev

================================================================================
FILE: package.json
================================================================================
{
  "name": "aio-generator",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "@radix-ui/react-slot": "^1.0.2",
    "class-variance-authority": "^0.7.0",
    "clsx": "^2.1.0",
    "lucide-react": "^0.312.0",
    "next": "14.1.0",
    "react": "^18",
    "react-dom": "^18",
    "tailwind-merge": "^2.2.0",
    "tailwindcss-animate": "^1.0.7"
  },
  "devDependencies": {
    "@types/node": "^20",
    "@types/react": "^18",
    "@types/react-dom": "^18",
    "autoprefixer": "^10.0.1",
    "postcss": "^8",
    "tailwindcss": "^3.4.1",
    "typescript": "^5"
  }
}

================================================================================
FILE: next.config.mjs
================================================================================
/** @type {import('next').NextConfig} */
const nextConfig = {};

export default nextConfig;

================================================================================
FILE: tsconfig.json
================================================================================
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "baseUrl": ".",
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules", ".next"]
}

================================================================================
FILE: tailwind.config.ts
================================================================================
import type { Config } from "tailwindcss";

export default {
  darkMode: ["class"],
  content: [
    "./pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./components/**/*.{js,ts,jsx,tsx,mdx}",
    "./app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      colors: {
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        chart: {
          "1": "hsl(var(--chart-1))",
          "2": "hsl(var(--chart-2))",
          "3": "hsl(var(--chart-3))",
          "4": "hsl(var(--chart-4))",
          "5": "hsl(var(--chart-5))",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
      fontFamily: {
        sans: ["var(--font-inter)", "system-ui", "sans-serif"],
        mono: ["ui-monospace", "SFMono-Regular", "monospace"],
      },
      animation: {
        "fade-in": "fade-in 0.3s ease-out",
      },
      keyframes: {
        "fade-in": {
          "0%": { opacity: "0", transform: "translateY(10px)" },
          "100%": { opacity: "1", transform: "translateY(0)" },
        },
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
} satisfies Config;

================================================================================
FILE: postcss.config.js
================================================================================
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}

================================================================================
FILE: app/globals.css
================================================================================
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 210 40% 88%;
    --foreground: 210 40% 15%;
    --card: 0 0% 100%;
    --card-foreground: 210 40% 15%;
    --popover: 0 0% 100%;
    --popover-foreground: 210 40% 15%;
    --primary: 199 89% 38%;
    --primary-foreground: 0 0% 100%;
    --secondary: 210 20% 96%;
    --secondary-foreground: 210 40% 15%;
    --muted: 210 20% 96%;
    --muted-foreground: 210 20% 45%;
    --accent: 199 89% 95%;
    --accent-foreground: 199 89% 30%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 210 20% 90%;
    --input: 210 20% 90%;
    --ring: 199 89% 38%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 210 30% 8%;
    --foreground: 210 20% 95%;
    --card: 210 30% 12%;
    --card-foreground: 210 20% 95%;
    --popover: 210 30% 12%;
    --popover-foreground: 210 20% 95%;
    --primary: 199 89% 48%;
    --primary-foreground: 0 0% 100%;
    --secondary: 210 30% 18%;
    --secondary-foreground: 210 20% 95%;
    --muted: 210 30% 18%;
    --muted-foreground: 210 20% 60%;
    --accent: 199 89% 20%;
    --accent-foreground: 199 89% 70%;
    --destructive: 0 62% 50%;
    --destructive-foreground: 0 0% 100%;
    --border: 210 30% 20%;
    --input: 210 30% 20%;
    --ring: 199 89% 48%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground antialiased;
  }
}

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--muted));
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.3);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.5);
}

================================================================================
FILE: app/layout.tsx
================================================================================
import type { Metadata, Viewport } from "next"
import { Inter } from "next/font/google"
import "./globals.css"

const inter = Inter({ subsets: ["latin"], variable: "--font-inter" })

export const metadata: Metadata = {
  title: "AIO Generator - CSV to AIO Converter",
  description: "Convert CSV files to Associated Information Object (.aio) format",
}

export const viewport: Viewport = {
  themeColor: "#22c55e",
  width: "device-width",
  initialScale: 1,
}

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode
}>) {
  return (
    <html lang="en">
      <body className={`${inter.variable} font-sans`}>{children}</body>
    </html>
  )
}

================================================================================
FILE: app/page.tsx
================================================================================
"use client"

import { useState, useCallback } from "react"
import { FileUpload } from "@/components/file-upload"
import { ConversionPreview } from "@/components/conversion-preview"
import { Database, ArrowRight, Layers, Cpu, Globe } from "lucide-react"
import { Button } from "@/components/ui/button"

export interface ConvertedFile {
  originalName: string
  csvData: string[][]
  headers: string[]
  aioLines: string[]
}

function csvToAio(headers: string[], row: string[]): string {
  const parts: string[] = []
  for (let i = 0; i < headers.length; i++) {
    const key = headers[i]
    let val = row[i] ?? ""
    val = val.replace(/\r\n/g, " ").replace(/\n/g, " ").replace(/\r/g, " ").replace(/\t/g, " ")
    parts.push(`[${key}.${val}]`)
  }
  return parts.join("")
}

function parseCSV(text: string): { headers: string[]; rows: string[][] } {
  const lines = text.split(/\r?\n/).filter((line) => line.trim() !== "")
  if (lines.length === 0) return { headers: [], rows: [] }

  const parseLine = (line: string): string[] => {
    const result: string[] = []
    let current = ""
    let inQuotes = false

    for (let i = 0; i < line.length; i++) {
      const char = line[i]
      if (char === '"') {
        if (inQuotes && line[i + 1] === '"') {
          current += '"'
          i++
        } else {
          inQuotes = !inQuotes
        }
      } else if (char === "," && !inQuotes) {
        result.push(current)
        current = ""
      } else {
        current += char
      }
    }
    result.push(current)
    return result
  }

  const headers = parseLine(lines[0])
  const rows = lines.slice(1).map(parseLine)

  return { headers, rows }
}

export default function HomePage() {
  const [showConverter, setShowConverter] = useState(false)
  const [convertedFiles, setConvertedFiles] = useState<ConvertedFile[]>([])
  const [isProcessing, setIsProcessing] = useState(false)

  const handleFilesSelected = useCallback(async (files: File[]) => {
    setIsProcessing(true)
    const results: ConvertedFile[] = []

    for (const file of files) {
      try {
        const text = await file.text()
        const { headers, rows } = parseCSV(text)

        if (headers.length === 0) continue

        const aioLines = rows.map((row) => csvToAio(headers, row))

        results.push({
          originalName: file.name,
          csvData: rows,
          headers,
          aioLines,
        })
      } catch (error) {
        console.error(`Error processing ${file.name}:`, error)
      }
    }

    setConvertedFiles(results)
    setIsProcessing(false)
  }, [])

  const handleClear = useCallback(() => {
    setConvertedFiles([])
  }, [])

  if (!showConverter) {
    return (
      <div className="min-h-screen flex flex-col bg-gradient-to-b from-background to-secondary/30">
        {/* Header */}
        <header className="border-b border-border bg-card/80 backdrop-blur-sm">
          <div className="container mx-auto px-4 py-4 max-w-6xl">
            <div className="flex items-center gap-3">
              <div className="p-2 rounded-lg bg-primary text-primary-foreground">
                <Database className="h-5 w-5" />
              </div>
              <span className="font-semibold text-lg text-foreground">AIO Generator</span>
            </div>
          </div>
        </header>

        {/* Hero Section */}
        <main className="flex-1 container mx-auto px-4 py-16 max-w-6xl">
          <div className="text-center mb-16">
            <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-medium mb-6">
              <Cpu className="h-4 w-4" />
              Information Physics Standard Model
            </div>
            <h1 className="text-4xl md:text-5xl lg:text-6xl font-bold text-foreground mb-6 text-balance leading-tight">
              AIO Generator
            </h1>
            <p className="text-xl text-primary font-medium mb-4">
              by AWC Technology LLC
            </p>
            <p className="text-lg text-muted-foreground max-w-3xl mx-auto text-pretty leading-relaxed">
              Transform your CSV data into Associated Information Objects (AIOs) - the fundamental 
              unit of information in the new Information Physics Standard Model.
            </p>
          </div>

          {/* Feature Cards */}
          <div className="grid md:grid-cols-3 gap-6 mb-16">
            <div className="bg-card rounded-xl p-6 border border-border shadow-sm">
              <div className="p-3 rounded-lg bg-primary/10 w-fit mb-4">
                <Layers className="h-6 w-6 text-primary" />
              </div>
              <h3 className="font-semibold text-lg text-foreground mb-2">
                Application Agnostic
              </h3>
              <p className="text-muted-foreground text-sm leading-relaxed">
                AIOs are information objects not tied to any application or relational database schema, 
                enabling universal data interoperability.
              </p>
            </div>

            <div className="bg-card rounded-xl p-6 border border-border shadow-sm">
              <div className="p-3 rounded-lg bg-primary/10 w-fit mb-4">
                <Globe className="h-6 w-6 text-primary" />
              </div>
              <h3 className="font-semibold text-lg text-foreground mb-2">
                Hyper-Semantic Model
              </h3>
              <p className="text-muted-foreground text-sm leading-relaxed">
                AIOs form the basis of a new hyper-semantic model that captures meaning and 
                relationships in a way traditional data formats cannot.
              </p>
            </div>

            <div className="bg-card rounded-xl p-6 border border-border shadow-sm">
              <div className="p-3 rounded-lg bg-primary/10 w-fit mb-4">
                <Cpu className="h-6 w-6 text-primary" />
              </div>
              <h3 className="font-semibold text-lg text-foreground mb-2">
                Next-Gen LLM Foundation
              </h3>
              <p className="text-muted-foreground text-sm leading-relaxed">
                This hyper-semantic model will serve as the foundation upon which a new class of 
                Large Language Models will operate with enhanced understanding.
              </p>
            </div>
          </div>

          {/* Conversion Process */}
          <div className="bg-card rounded-xl p-8 border border-border shadow-sm mb-16">
            <h2 className="text-2xl font-semibold text-foreground mb-6 text-center">
              The Conversion Process
            </h2>
            <div className="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-8">
              <div className="flex flex-col items-center text-center">
                <div className="p-4 rounded-xl bg-secondary mb-3">
                  <code className="text-sm font-mono text-muted-foreground">CSV</code>
                </div>
                <p className="text-sm text-muted-foreground">Tabular Data</p>
              </div>
              <ArrowRight className="h-6 w-6 text-primary hidden md:block" />
              <div className="h-6 w-px bg-border md:hidden" />
              <div className="flex flex-col items-center text-center">
                <div className="p-4 rounded-xl bg-primary/10 mb-3">
                  <code className="text-sm font-mono text-primary">[Col.Val]</code>
                </div>
                <p className="text-sm text-muted-foreground">AIO Format</p>
              </div>
              <ArrowRight className="h-6 w-6 text-primary hidden md:block" />
              <div className="h-6 w-px bg-border md:hidden" />
              <div className="flex flex-col items-center text-center">
                <div className="p-4 rounded-xl bg-accent mb-3">
                  <code className="text-sm font-mono text-accent-foreground">.aio</code>
                </div>
                <p className="text-sm text-muted-foreground">Semantic Object</p>
              </div>
            </div>
            <p className="text-center text-sm text-muted-foreground mt-6 max-w-2xl mx-auto">
              Each row of your CSV is transformed into a single-line AIO containing all column-value 
              pairs in the format: <code className="bg-secondary px-1.5 py-0.5 rounded text-xs">[Column1.Value1][Column2.Value2]...</code>
            </p>
          </div>

          {/* CTA */}
          <div className="text-center">
            <Button 
              size="lg" 
              onClick={() => setShowConverter(true)}
              className="gap-2 px-8"
            >
              Start Converting
              <ArrowRight className="h-4 w-4" />
            </Button>
          </div>
        </main>

        {/* Footer */}
        <footer className="border-t border-border py-6 bg-card/50">
          <div className="container mx-auto px-4 max-w-6xl">
            <p className="text-sm text-muted-foreground text-center">
              AWC Technology LLC - Pioneering the Information Physics Standard Model
            </p>
          </div>
        </footer>
      </div>
    )
  }

  return (
    <div className="min-h-screen flex flex-col bg-background">
      <header className="border-b border-border bg-card">
        <div className="container mx-auto px-4 py-4 max-w-5xl">
          <div className="flex items-center justify-between">
            <button 
              onClick={() => { setShowConverter(false); handleClear(); }}
              className="flex items-center gap-3 hover:opacity-80 transition-opacity"
            >
              <div className="p-2 rounded-lg bg-primary text-primary-foreground">
                <Database className="h-5 w-5" />
              </div>
              <div>
                <h1 className="text-lg font-semibold text-foreground">AIO Generator</h1>
                <p className="text-xs text-muted-foreground">by AWC Technology LLC</p>
              </div>
            </button>
          </div>
        </div>
      </header>

      <main className="flex-1 container mx-auto px-4 py-8 max-w-5xl">
        {convertedFiles.length === 0 ? (
          <FileUpload onFilesSelected={handleFilesSelected} isProcessing={isProcessing} />
        ) : (
          <ConversionPreview files={convertedFiles} onClear={handleClear} />
        )}
      </main>

      <footer className="border-t border-border py-4 bg-card/50">
        <div className="container mx-auto px-4 max-w-5xl">
          <p className="text-sm text-muted-foreground text-center">
            Each row becomes: [Column1.Value1][Column2.Value2]...
          </p>
        </div>
      </footer>
    </div>
  )
}

================================================================================
FILE: components/file-upload.tsx
================================================================================
"use client"

import { useCallback, useState } from "react"
import { Upload, FileText, Loader2 } from "lucide-react"
import { cn } from "@/lib/utils"

interface FileUploadProps {
  onFilesSelected: (files: File[]) => void
  isProcessing: boolean
}

export function FileUpload({ onFilesSelected, isProcessing }: FileUploadProps) {
  const [isDragOver, setIsDragOver] = useState(false)

  const handleDragOver = useCallback((e: React.DragEvent) => {
    e.preventDefault()
    e.stopPropagation()
    setIsDragOver(true)
  }, [])

  const handleDragLeave = useCallback((e: React.DragEvent) => {
    e.preventDefault()
    e.stopPropagation()
    setIsDragOver(false)
  }, [])

  const handleDrop = useCallback(
    (e: React.DragEvent) => {
      e.preventDefault()
      e.stopPropagation()
      setIsDragOver(false)

      const files = Array.from(e.dataTransfer.files).filter(
        (file) => file.type === "text/csv" || file.name.endsWith(".csv")
      )

      if (files.length > 0) {
        onFilesSelected(files)
      }
    },
    [onFilesSelected]
  )

  const handleFileInput = useCallback(
    (e: React.ChangeEvent<HTMLInputElement>) => {
      const files = e.target.files ? Array.from(e.target.files) : []
      if (files.length > 0) {
        onFilesSelected(files)
      }
    },
    [onFilesSelected]
  )

  return (
    <div className="w-full max-w-2xl mx-auto">
      <label
        htmlFor="file-upload"
        className={cn(
          "relative flex flex-col items-center justify-center w-full h-80 border-2 border-dashed rounded-xl cursor-pointer transition-all duration-200",
          isDragOver
            ? "border-primary bg-primary/5"
            : "border-border bg-card hover:border-primary/50 hover:bg-card/80",
          isProcessing && "pointer-events-none opacity-60"
        )}
        onDragOver={handleDragOver}
        onDragLeave={handleDragLeave}
        onDrop={handleDrop}
      >
        <div className="flex flex-col items-center justify-center pt-5 pb-6 px-4 text-center">
          {isProcessing ? (
            <>
              <Loader2 className="h-12 w-12 text-primary mb-4 animate-spin" />
              <p className="text-lg font-medium text-foreground">Processing files...</p>
            </>
          ) : (
            <>
              <div className="p-4 rounded-full bg-primary/10 mb-4">
                <Upload className="h-10 w-10 text-primary" />
              </div>
              <p className="text-lg font-medium text-foreground mb-2">
                Drop CSV files here
              </p>
              <p className="text-sm text-muted-foreground mb-4">
                or click to browse your files
              </p>
              <div className="flex items-center gap-2 text-xs text-muted-foreground">
                <FileText className="h-4 w-4" />
                <span>Supports .csv files</span>
              </div>
            </>
          )}
        </div>
        <input
          id="file-upload"
          type="file"
          className="hidden"
          accept=".csv,text/csv"
          multiple
          onChange={handleFileInput}
          disabled={isProcessing}
        />
      </label>

      <div className="mt-8 p-4 rounded-lg bg-muted/50 border border-border">
        <h3 className="text-sm font-medium text-foreground mb-2">How it works</h3>
        <ul className="text-sm text-muted-foreground space-y-1">
          <li>1. Upload one or more CSV files</li>
          <li>2. Each row is converted to a single AIO line</li>
          <li>3. Format: [Column1.Value1][Column2.Value2]...</li>
          <li>4. Download the .aio file or copy to clipboard</li>
        </ul>
      </div>
    </div>
  )
}

================================================================================
FILE: components/conversion-preview.tsx
================================================================================
"use client"

import { useState, useCallback } from "react"
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Download, Copy, Check, ArrowLeft, FileText, Package } from "lucide-react"
import type { ConvertedFile } from "@/app/page"
import { cn } from "@/lib/utils"

interface ConversionPreviewProps {
  files: ConvertedFile[]
  onClear: () => void
}

export function ConversionPreview({ files, onClear }: ConversionPreviewProps) {
  const [activeFileIndex, setActiveFileIndex] = useState(0)
  const [selectedRowIndex, setSelectedRowIndex] = useState(0)
  const [copied, setCopied] = useState(false)
  const [error, setError] = useState<string | null>(null)
  const [downloadStatus, setDownloadStatus] = useState<"idle" | "success" | "error">("idle")
  const [downloadAllStatus, setDownloadAllStatus] = useState<"idle" | "success" | "error">("idle")
  const [downloadedFiles, setDownloadedFiles] = useState<string[]>([])
  const [showDownloaded, setShowDownloaded] = useState(false)

  const activeFile = files[activeFileIndex]

  const handleCopyAio = useCallback(async () => {
    setError(null)
    try {
      const content = activeFile.aioLines[selectedRowIndex]
      await navigator.clipboard.writeText(content)
      setCopied(true)
      setTimeout(() => setCopied(false), 2000)
    } catch (err) {
      const message = err instanceof Error ? err.message : "Failed to copy"
      setError(`Copy failed: ${message}`)
    }
  }, [activeFile, selectedRowIndex])

  const handleDownloadSelectedAio = useCallback(() => {
    setError(null)
    setDownloadStatus("idle")
    try {
      if (!activeFile || !activeFile.aioLines || !activeFile.aioLines[selectedRowIndex]) {
        throw new Error("No AIO content available for selected row")
      }
      const content = activeFile.aioLines[selectedRowIndex] + "\n"
      const fileName = activeFile.originalName.replace(/\.csv$/i, `-row${selectedRowIndex + 1}.aio`)
      
      // Use data URL approach for better sandbox compatibility
      const dataUrl = "data:text/plain;charset=utf-8," + encodeURIComponent(content)
      const link = document.createElement("a")
      link.href = dataUrl
      link.download = fileName
      link.target = "_blank"
      link.rel = "noopener noreferrer"
      
      // Try to trigger download
      document.body.appendChild(link)
      link.click()
      document.body.removeChild(link)
      
      setDownloadStatus("success")
      setDownloadedFiles(prev => [...prev, fileName])
      setTimeout(() => setDownloadStatus("idle"), 3000)
    } catch (err) {
      const message = err instanceof Error ? err.message : "Unknown error"
      setError(`Download failed: ${message}`)
      setDownloadStatus("error")
      setTimeout(() => setDownloadStatus("idle"), 5000)
    }
  }, [activeFile, selectedRowIndex])

  const handleDownloadAllAios = useCallback(() => {
    setError(null)
    setDownloadAllStatus("idle")
    try {
      if (!files || files.length === 0) {
        throw new Error("No files to download")
      }
      // Download each file as a separate .aio file
      files.forEach((file, index) => {
        setTimeout(() => {
          try {
            const content = file.aioLines.join("\n") + "\n"
            const aioFileName = file.originalName.replace(/\.csv$/i, ".aio")
            
            // Use data URL approach for better sandbox compatibility
            const dataUrl = "data:text/plain;charset=utf-8," + encodeURIComponent(content)
            const link = document.createElement("a")
            link.href = dataUrl
            link.download = aioFileName
            link.target = "_blank"
            link.rel = "noopener noreferrer"
            
            document.body.appendChild(link)
            link.click()
            document.body.removeChild(link)
            
            setDownloadedFiles(prev => [...prev, aioFileName])
          } catch (innerErr) {
            const message = innerErr instanceof Error ? innerErr.message : "Unknown error"
            setError(`Download failed for ${file.originalName}: ${message}`)
            setDownloadAllStatus("error")
          }
        }, index * 500) // Stagger downloads to avoid browser blocking
      })
      setDownloadAllStatus("success")
      setTimeout(() => setDownloadAllStatus("idle"), 3000)
    } catch (err) {
      const message = err instanceof Error ? err.message : "Unknown error"
      setError(`Download all failed: ${message}`)
      setDownloadAllStatus("error")
      setTimeout(() => setDownloadAllStatus("idle"), 5000)
    }
  }, [files])

  return (
    <div className="space-y-6">
      {error && (
        <div className="bg-destructive/10 border border-destructive text-destructive px-4 py-3 rounded-lg">
          <strong>Error:</strong> {error}
          <button 
            onClick={() => setError(null)} 
            className="ml-4 underline"
          >
            Dismiss
          </button>
        </div>
      )}
      <div className="flex items-center justify-between">
        <Button variant="ghost" onClick={onClear} className="gap-2">
          <ArrowLeft className="h-4 w-4" />
          Upload more files
        </Button>
        {downloadedFiles.length > 0 && (
          <Button 
            variant="outline" 
            size="sm" 
            onClick={() => setShowDownloaded(!showDownloaded)}
            className="gap-2"
          >
            <Download className="h-4 w-4" />
            View Downloaded ({downloadedFiles.length})
          </Button>
        )}
      </div>
      
      {showDownloaded && downloadedFiles.length > 0 && (
        <Card className="bg-green-50 border-green-200">
          <CardHeader className="pb-2">
            <CardTitle className="text-sm flex items-center justify-between">
              <span className="text-green-800">Downloaded Files (saved to your Downloads folder)</span>
              <Button 
                variant="ghost" 
                size="sm" 
                onClick={() => setDownloadedFiles([])}
                className="text-xs text-green-600 hover:text-green-800"
              >
                Clear list
              </Button>
            </CardTitle>
          </CardHeader>
          <CardContent className="pt-0">
            <ul className="text-sm space-y-1">
              {downloadedFiles.map((fileName, idx) => (
                <li key={idx} className="flex items-center gap-2 text-green-700">
                  <Check className="h-3 w-3" />
                  {fileName}
                </li>
              ))}
            </ul>
          </CardContent>
        </Card>
      )}

      {files.length > 1 && (
        <div className="flex gap-2 flex-wrap">
          {files.map((file, index) => (
            <Button
              key={file.originalName}
              variant={index === activeFileIndex ? "default" : "outline"}
              size="sm"
              onClick={() => { setActiveFileIndex(index); setSelectedRowIndex(0); }}
              className="gap-2"
            >
              <FileText className="h-4 w-4" />
              {file.originalName}
            </Button>
          ))}
        </div>
      )}

      <div className="flex flex-col gap-6">
        {/* CSV Grid View */}
        <Card>
          <CardHeader className="pb-4">
            <div className="flex items-center justify-between">
              <CardTitle className="text-lg flex items-center gap-2">
                <FileText className="h-5 w-5 text-primary" />
                CSV Data
                <span className="text-sm font-normal text-muted-foreground">
                  ({activeFile.csvData.length} rows)
                </span>
              </CardTitle>
              <Button 
                onClick={handleDownloadAllAios} 
                className={cn(
                  "gap-2",
                  downloadAllStatus === "success" && "bg-green-600 hover:bg-green-700",
                  downloadAllStatus === "error" && "bg-red-600 hover:bg-red-700"
                )} 
                size="sm"
              >
                <Package className="h-4 w-4" />
                {downloadAllStatus === "success" ? "Downloaded!" : downloadAllStatus === "error" ? "Failed!" : "Download All AIOs"}
              </Button>
            </div>
          </CardHeader>
          <CardContent>
            <div className="overflow-auto max-h-96 border border-border rounded-lg">
              <table className="w-full text-sm">
                <thead className="sticky top-0 bg-card border-b border-border">
                  <tr>
                    <th className="px-3 py-2 text-left font-medium text-muted-foreground">#</th>
                    {activeFile.headers.map((header) => (
                      <th
                        key={header}
                        className="px-3 py-2 text-left font-medium text-muted-foreground"
                      >
                        {header}
                      </th>
                    ))}
                  </tr>
                </thead>
                <tbody>
                  {activeFile.csvData.map((row, rowIndex) => (
                    <tr 
                      key={rowIndex} 
                      className={cn(
                        "border-b border-border/50 cursor-pointer transition-colors",
                        rowIndex === selectedRowIndex 
                          ? "bg-primary/10" 
                          : "hover:bg-muted/50"
                      )}
                      onClick={() => setSelectedRowIndex(rowIndex)}
                    >
                      <td className="px-3 py-2 text-muted-foreground">{rowIndex + 1}</td>
                      {row.map((cell, cellIndex) => (
                        <td key={cellIndex} className="px-3 py-2 text-foreground">
                          {cell}
                        </td>
                      ))}
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </CardContent>
        </Card>

        {/* AIO Output View */}
        <Card>
          <CardHeader className="pb-4">
            <div className="flex items-center justify-between">
              <CardTitle className="text-lg flex items-center gap-2">
                AIO Output
                <span className="text-sm font-normal text-muted-foreground">
                  (Row {selectedRowIndex + 1})
                </span>
              </CardTitle>
              <div className="flex items-center gap-2">
                <Button variant="outline" size="sm" onClick={handleCopyAio} className="gap-2">
                  {copied ? <Check className="h-4 w-4" /> : <Copy className="h-4 w-4" />}
                  {copied ? "Copied" : "Copy"}
                </Button>
                <Button 
                  size="sm" 
                  onClick={handleDownloadSelectedAio} 
                  className={cn(
                    "gap-2",
                    downloadStatus === "success" && "bg-green-600 hover:bg-green-700",
                    downloadStatus === "error" && "bg-red-600 hover:bg-red-700"
                  )}
                >
                  <Download className="h-4 w-4" />
                  {downloadStatus === "success" ? "Downloaded!" : downloadStatus === "error" ? "Failed!" : "Download .aio"}
                </Button>
              </div>
            </div>
          </CardHeader>
          <CardContent>
            <div className="bg-muted/50 rounded-lg p-4 min-h-[200px]">
              <pre className="text-sm font-mono text-primary whitespace-pre-wrap break-all">
                {activeFile.aioLines[selectedRowIndex]}
              </pre>
            </div>
            <div className="mt-4 text-sm text-muted-foreground">
              <p className="font-medium mb-2">AIO Format Breakdown:</p>
              <div className="flex flex-wrap gap-2">
                {activeFile.headers.map((header, idx) => (
                  <span 
                    key={header} 
                    className="inline-flex items-center px-2 py-1 rounded bg-secondary text-xs font-mono"
                  >
                    [{header}.{activeFile.csvData[selectedRowIndex]?.[idx] ?? ""}]
                  </span>
                ))}
              </div>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  )
}

================================================================================
FILE: components/ui/button.tsx
================================================================================
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default:
          "bg-primary text-primary-foreground shadow hover:bg-primary/90",
        destructive:
          "bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",
        outline:
          "border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",
        secondary:
          "bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2",
        sm: "h-8 rounded-md px-3 text-xs",
        lg: "h-10 rounded-md px-8",
        icon: "h-9 w-9",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button"
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }

================================================================================
FILE: components/ui/card.tsx
================================================================================
import * as React from "react"

import { cn } from "@/lib/utils"

const Card = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn(
      "rounded-xl border border-border bg-card text-card-foreground shadow",
      className
    )}
    {...props}
  />
))
Card.displayName = "Card"

const CardHeader = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex flex-col space-y-1.5 p-6", className)}
    {...props}
  />
))
CardHeader.displayName = "CardHeader"

const CardTitle = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("font-semibold leading-none tracking-tight", className)}
    {...props}
  />
))
CardTitle.displayName = "CardTitle"

const CardDescription = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
CardDescription.displayName = "CardDescription"

const CardContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
))
CardContent.displayName = "CardContent"

const CardFooter = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex items-center p-6 pt-0", className)}
    {...props}
  />
))
CardFooter.displayName = "CardFooter"

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }

================================================================================
FILE: lib/utils.ts
================================================================================
import { type ClassValue, clsx } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

================================================================================
END OF PROJECT FILES
================================================================================
